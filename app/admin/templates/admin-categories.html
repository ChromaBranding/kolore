{% extends 'admin-base.html'%}
{% block content %}
    <div class="card fadeInUp hide">
        <div class="title group">
            <h3 class="light left">{{_("All")}} <b>{{_("Categories")}}</b></h3>
        </div>
        <div class="units-row">
            <div class="unit-50">
                <h2 class="light">{{_("Edit")}} <b>{{_("Categories")}}</b></h2><br>
                <p>{{_("Pick a category from the list in the left, and edit it in the right column.")}}</p>
                {% set labels = ['','-black', '-blue', '-red','-yellow','-green'] %}
                {% for category in categories%}
                    <a href="{{ url_for('admin.edit_category', cat_id=category.key.id())}}">
                        <span class="label label-outline label{{labels|random()}}">{{category.name}}</span>
                    </a>
                {% endfor %}
            </div>
            <div class="unit-50">
                <form id="edit" method="post">
                    <h2 class="light">{{_("Add")}} <b>{{_("Categories")}}</b></h2><br>
                    <p>{{_("<span class='text-info'>Search for existing categories or write a new one and <b>press enter</b></span>. Please try <b>not to duplicate</b> categories.")}}</p>
                    <input type="text" id="categories" name="categories" class="form-control">
                    <br>
                    <br>
                    <button class="btn btn-small btn-blue btn-outline" type="submit">
                        <i class="fa fa-plus"></i>&nbsp;&nbsp;{{_("Add Category")}}
                    </button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
<script type="text/javascript" src="{{url_for('admin.static', filename='plugins/jquery/dist/jquery.js')}}"></script>
<script type="text/javascript" src="{{url_for('admin.static', filename='plugins/select2/select2.min.js')}}"></script>
<script type="application/javascript">
$('#categories').select2({
    tags:[{% for category in categories%}{{category.name|tojson}}{% if not loop.last%},{% endif %}{% endfor %}],
    tokenSeparators: [",","."],
    matcher: function(term, text) {
        return text.toUpperCase().indexOf(term.toUpperCase())==0;
    }
});
</script>
{% endblock %}